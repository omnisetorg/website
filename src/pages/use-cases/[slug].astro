---
import { getCollection } from 'astro:content';
import BaseLayout from '@layouts/BaseLayout.astro';
import JsonLd from '@components/seo/JsonLd.astro';

export async function getStaticPaths() {
  const usecases = await getCollection('usecases');
  return usecases.map((usecase) => ({
    params: { slug: usecase.data.slug },
    props: { usecase: usecase.data }
  }));
}

const { usecase } = Astro.props;
---

<BaseLayout
  title={usecase.seo.title}
  description={usecase.seo.description}
  canonical={`https://omniset.org/use-cases/${usecase.slug}/`}
>
  <section class="py-20 bg-gradient-hero text-white">
    <div class="container mx-auto px-6">
      <div class="max-w-3xl mx-auto text-center">
        <h1 class="text-4xl md:text-5xl font-bold mb-6">{usecase.title}</h1>
        <p class="text-xl text-white/80">{usecase.description}</p>
      </div>
    </div>
  </section>

  <section class="py-16 bg-white">
    <div class="container mx-auto px-6">
      <div class="max-w-3xl mx-auto">
        <p class="text-lg text-gray-600 leading-relaxed mb-12">{usecase.longDescription}</p>

        <h2 class="text-2xl font-bold text-gray-900 mb-6">Why Linux?</h2>
        <ul class="space-y-3 mb-12">
          {usecase.benefits.map((benefit: string) => (
            <li class="flex items-start gap-3">
              <svg class="w-6 h-6 text-green-500 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
              <span class="text-gray-600">{benefit}</span>
            </li>
          ))}
        </ul>

        <h2 class="text-2xl font-bold text-gray-900 mb-6">Getting Started</h2>
        <div class="space-y-6 mb-12">
          {usecase.gettingStarted.map((step: {step: number, title: string, description: string}) => (
            <div class="flex gap-4">
              <div class="w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center flex-shrink-0 text-indigo-600 font-bold">
                {step.step}
              </div>
              <div>
                <h3 class="font-semibold text-gray-900">{step.title}</h3>
                <p class="text-gray-600 mt-1">{step.description}</p>
              </div>
            </div>
          ))}
        </div>

        <div class="p-6 bg-gray-50 rounded-2xl">
          <h3 class="font-semibold text-gray-900 mb-4">Recommended Setup</h3>
          <div class="flex flex-wrap gap-2 mb-4">
            <span class="text-sm text-gray-600">Tools:</span>
            {usecase.recommendedTools.map((tool: string) => (
              <a href={`/tools/${tool}/`} class="text-sm px-3 py-1 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition-colors">{tool}</a>
            ))}
          </div>
          <div class="flex flex-wrap gap-2">
            <span class="text-sm text-gray-600">Distros:</span>
            {usecase.recommendedDistros.map((distro: string) => (
              <a href={`/distros/${distro}/`} class="text-sm px-3 py-1 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors">{distro}</a>
            ))}
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="py-12 bg-gray-50">
    <div class="container mx-auto px-6">
      <div class="max-w-3xl mx-auto text-center">
        <h2 class="text-2xl font-bold text-gray-900 mb-4">Ready to get started?</h2>
        <div
          class="inline-block bg-gray-900 text-green-400 px-6 py-4 rounded-xl font-mono text-sm cursor-pointer hover:-translate-y-1 transition-all"
          onclick="copyToClipboard(this)">
          curl -sL https://omniset.org/install | bash
        </div>
        <p class="text-sm text-gray-500 mt-3">Click to copy</p>
      </div>
    </div>
  </section>
</BaseLayout>
