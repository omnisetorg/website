---
import { getCollection } from 'astro:content';
import BaseLayout from '@layouts/BaseLayout.astro';

export async function getStaticPaths() {
  const comparisons = await getCollection('comparisons');
  return comparisons.map((comparison) => ({
    params: { slug: comparison.data.slug },
    props: { comparison: comparison.data }
  }));
}

const { comparison } = Astro.props;
---

<BaseLayout
  title={comparison.seo.title}
  description={comparison.seo.description}
  canonical={`https://omniset.org/compare/${comparison.slug}/`}
>
  <section class="py-20 bg-gradient-hero text-white">
    <div class="container mx-auto px-6">
      <div class="max-w-3xl mx-auto text-center">
        <h1 class="text-4xl md:text-5xl font-bold mb-6">{comparison.title}</h1>
        <p class="text-xl text-white/80">An honest comparison to help you choose</p>
      </div>
    </div>
  </section>

  <section class="py-16 bg-white">
    <div class="container mx-auto px-6">
      <div class="max-w-5xl mx-auto">
        <div class="grid md:grid-cols-2 gap-8 mb-16">
          <!-- Item A -->
          <div class="p-6 rounded-2xl border-2 border-indigo-200 bg-indigo-50/30">
            <div class="flex items-center gap-4 mb-6">
              {comparison.itemA.logo && <img src={comparison.itemA.logo} alt="" class="w-12 h-12 object-contain" />}
              <h2 class="text-2xl font-bold text-gray-900">{comparison.itemA.name}</h2>
            </div>
            <h3 class="font-semibold text-green-600 mb-3">Pros</h3>
            <ul class="space-y-2 mb-6">
              {comparison.itemA.pros.map((pro: string) => (
                <li class="flex items-start gap-2 text-sm text-gray-600">
                  <svg class="w-5 h-5 text-green-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                  </svg>
                  {pro}
                </li>
              ))}
            </ul>
            <h3 class="font-semibold text-red-600 mb-3">Cons</h3>
            <ul class="space-y-2 mb-6">
              {comparison.itemA.cons.map((con: string) => (
                <li class="flex items-start gap-2 text-sm text-gray-600">
                  <svg class="w-5 h-5 text-red-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                  </svg>
                  {con}
                </li>
              ))}
            </ul>
            <p class="text-sm"><strong>Best for:</strong> {comparison.itemA.bestFor}</p>
          </div>

          <!-- Item B -->
          <div class="p-6 rounded-2xl border-2 border-gray-200">
            <div class="flex items-center gap-4 mb-6">
              {comparison.itemB.logo && <img src={comparison.itemB.logo} alt="" class="w-12 h-12 object-contain" />}
              <h2 class="text-2xl font-bold text-gray-900">{comparison.itemB.name}</h2>
            </div>
            <h3 class="font-semibold text-green-600 mb-3">Pros</h3>
            <ul class="space-y-2 mb-6">
              {comparison.itemB.pros.map((pro: string) => (
                <li class="flex items-start gap-2 text-sm text-gray-600">
                  <svg class="w-5 h-5 text-green-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                  </svg>
                  {pro}
                </li>
              ))}
            </ul>
            <h3 class="font-semibold text-red-600 mb-3">Cons</h3>
            <ul class="space-y-2 mb-6">
              {comparison.itemB.cons.map((con: string) => (
                <li class="flex items-start gap-2 text-sm text-gray-600">
                  <svg class="w-5 h-5 text-red-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                  </svg>
                  {con}
                </li>
              ))}
            </ul>
            <p class="text-sm"><strong>Best for:</strong> {comparison.itemB.bestFor}</p>
          </div>
        </div>

        <!-- Comparison Table -->
        <h2 class="text-2xl font-bold text-gray-900 mb-6">Feature Comparison</h2>
        <div class="overflow-x-auto mb-12">
          <table class="w-full border-collapse">
            <thead>
              <tr class="bg-gray-100">
                <th class="text-left p-4 font-semibold">Feature</th>
                <th class="text-left p-4 font-semibold">{comparison.itemA.name}</th>
                <th class="text-left p-4 font-semibold">{comparison.itemB.name}</th>
              </tr>
            </thead>
            <tbody>
              {comparison.comparisonTable.map((row: {feature: string, itemA: string, itemB: string}, i: number) => (
                <tr class={i % 2 === 0 ? 'bg-white' : 'bg-gray-50'}>
                  <td class="p-4 border-t border-gray-200 font-medium">{row.feature}</td>
                  <td class="p-4 border-t border-gray-200">{row.itemA}</td>
                  <td class="p-4 border-t border-gray-200">{row.itemB}</td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>

        <!-- Verdict -->
        <div class="p-6 bg-indigo-50 rounded-2xl">
          <h2 class="text-xl font-bold text-gray-900 mb-4">Our Verdict</h2>
          <p class="text-gray-700">{comparison.verdict}</p>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>
