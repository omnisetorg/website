---
import '@/styles/global.css';
import Header from '@components/Header.astro';
import Footer from '@components/Footer.astro';
import SEOHead from '@components/seo/SEOHead.astro';

interface Props {
  title: string;
  description: string;
  canonical?: string;
  ogType?: string;
  noindex?: boolean;
}

const {
  title,
  description,
  canonical = Astro.url.href,
  ogType = 'website',
  noindex = false
} = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0" />

  <SEOHead
    title={title}
    description={description}
    canonical={canonical}
    ogType={ogType}
    noindex={noindex}
  />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />

  <slot name="head" />
</head>

<body class="bg-white text-gray-900">
  <!-- Skip to main content link for keyboard users -->
  <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-[100] focus:px-4 focus:py-2 focus:bg-indigo-600 focus:text-white focus:rounded-lg">
    Skip to main content
  </a>

  <Header />

  <main id="main-content" role="main">
    <slot />
  </main>

  <slot name="before-footer" />

  <Footer />

  <script is:inline>
    // Copy to clipboard functionality
    function copyToClipboard(element) {
      const text = element.textContent;
      navigator.clipboard.writeText(text).then(() => {
        element.classList.add('bg-green-500', 'text-white');
        element.textContent = 'Copied!';
        setTimeout(() => {
          element.classList.remove('bg-green-500', 'text-white');
          element.textContent = text;
        }, 2000);
      });
    }
    window.copyToClipboard = copyToClipboard;

    // Mobile menu toggle with ARIA support
    document.addEventListener('DOMContentLoaded', () => {
      const menuBtn = document.getElementById('mobile-menu-btn');
      const mobileMenu = document.getElementById('mobile-menu');

      if (menuBtn && mobileMenu) {
        menuBtn.addEventListener('click', () => {
          const isExpanded = menuBtn.getAttribute('aria-expanded') === 'true';
          menuBtn.setAttribute('aria-expanded', !isExpanded);
          mobileMenu.classList.toggle('hidden');
        });
      }
    });
  </script>
</body>
</html>
